@model IEnumerable<Data_access_layer.model.Assignment>

@{
    ViewData["Title"] = "قائمة الواجبات";
}

<div class="card shadow mb-4">
    <div class="card-header py-3 bg-primary">
        <h6 class="m-0 font-weight-bold text-white">@ViewData["Title"]</h6>
    </div>

    <div class="text-right mt-3">
        <a asp-action="Create" class="btn btn-success btn-icon-split">
            <span class="icon text-white-50">
                <i class="fas fa-plus"></i>
            </span>
            <span class="text">إضافة واجب جديد</span>
        </a>
    </div>
    <br>
    </br>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered table-hover text-right" dir="rtl" id="dataTable" width="100%" cellspacing="0">
                <thead class="bg-light">
                    <tr>
                        <th>العنوان</th>
                        <th>المدة</th>
                        <th>أعلى درجة</th>
                        <th>المقرر</th>
                        <th>الدرس</th>
                        <th class="text-center">الإجراءات</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Title</td>
                            <td>@item.duration دقائق</td>
                            <td>@item.MaxGrade</td>
                            <td>@item.Course?.Title</td>
                            <td>@(item.Lesson?.Title ?? "لا يوجد")</td>
                            <td class="text-center">
                                <div class="btn-group" role="group">
                                    <a asp-action="Details" asp-route-id="@item.ID" class="btn btn-sm btn-info mx-1" title="التفاصيل">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a asp-action="Edit" asp-route-id="@item.ID" class="btn btn-sm btn-primary mx-1" title="تعديل">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <form asp-action="Delete" method="post" class="d-inline">
                                        <input type="hidden" name="id" value="@item.ID" />
                                        <button type="submit" class="btn btn-sm btn-danger mx-1"
                                                title="حذف" onclick="return confirm('هل أنت متأكد من حذف هذا الواجب؟')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Styles {
    <style>
        /* Table styling for aesthetics */
        #dataTable {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }

            #dataTable thead th {
                background-color: #f8f9fc !important;
                font-weight: 700;
                cursor: pointer; /* optional for sort indication */
                transition: background-color 0.3s;
            }

                #dataTable thead th:hover {
                    background-color: #e9ecef;
                }

            #dataTable tbody tr:hover {
                background-color: #f1f1f1;
            }

        /* Buttons styling for better UX */
        .btn {
            border-radius: 20px;
            padding: 5px 12px;
            transition: all 0.3s ease;
        }

        /* Hover effects for different buttons */
        .btn-info:hover {
            background-color: #17a2b8;
            color: #fff;
        }

        .btn-primary:hover {
            background-color: #007bff;
            color: #fff;
        }

        .btn-danger:hover {
            background-color: #dc3545;
            color: #fff;
        }

        /* Icon size inside buttons */
        .btn i {
            font-size: 14px;
        }

        /* Center button group */
        .btn-group {
            justify-content: center; /* Flex container */
        }
    </style>
}